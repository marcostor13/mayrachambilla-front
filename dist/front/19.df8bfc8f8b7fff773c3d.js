(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{uwDU:function(e,n,t){"use strict";t.r(n),t.d(n,"ProfileModule",(function(){return k}));var r=t("ofXK"),a=t("tyNb"),o=t("pLZG"),l=t("eIep"),i=t("nYR2"),b=t("5cVi"),s=t("fXoL"),c=t("H+bZ"),p=t("6Qg2"),d=t("UbJi"),u=t("l7P3"),g=t("Vaw3"),f=t("L4Wb"),m=t("K+05"),h=t("3Pt+"),R=t("bbor");function v(e,n){if(1&e){const e=s.Sb();s.Rb(0,"div",14),s.Rb(1,"div",15),s.Rb(2,"label",16),s.zc(3,"Apellido Paterno"),s.Qb(),s.Rb(4,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.fatherslastname=n})),s.Qb(),s.Qb(),s.Rb(5,"div",15),s.Rb(6,"label",16),s.zc(7,"Apellido Materno"),s.Qb(),s.Rb(8,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.motherslastname=n})),s.Qb(),s.Qb(),s.Rb(9,"div",15),s.Rb(10,"label",16),s.zc(11,"Nombres"),s.Qb(),s.Rb(12,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.name=n})),s.Qb(),s.Qb(),s.Rb(13,"div",15),s.Rb(14,"label",16),s.zc(15,"Nro de DNI"),s.Qb(),s.Rb(16,"input",18),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.dninumber=n})),s.Qb(),s.Qb(),s.Rb(17,"div",15),s.Rb(18,"label",16),s.zc(19,"Fecha Nacimiento"),s.Qb(),s.Rb(20,"input",19),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.dateofbirth=n})),s.Qb(),s.Qb(),s.Rb(21,"div",15),s.Rb(22,"label",16),s.zc(23,"Pa\xeds de nacimiento"),s.Qb(),s.Rb(24,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.countryofbirth=n})),s.Qb(),s.Qb(),s.Rb(25,"div",15),s.Rb(26,"label",16),s.zc(27,"Pa\xeds de residencia"),s.Qb(),s.Rb(28,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.countryofresidence=n})),s.Qb(),s.Qb(),s.Rb(29,"div",15),s.Rb(30,"label",16),s.zc(31,"Tel\xe9fono"),s.Qb(),s.Rb(32,"input",18),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.phone=n})),s.Qb(),s.Qb(),s.Rb(33,"div",20),s.Rb(34,"label",16),s.zc(35,"Direcci\xf3n"),s.Qb(),s.Rb(36,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.naturalperson.address=n})),s.Qb(),s.Qb(),s.Rb(37,"div",21),s.Rb(38,"div",22),s.Rb(39,"div",23),s.Rb(40,"label"),s.zc(41,"Imagen de documento (frente)"),s.Qb(),s.Rb(42,"div",24),s.Rb(43,"div",25),s.zc(44,"Subir"),s.Qb(),s.Rb(45,"input",26),s.Zb("change",(function(n){return s.pc(e),s.bc().uploadDocument(n,"naturalperson-dnifront")})),s.Qb(),s.Rb(46,"a",27),s.zc(47),s.Qb(),s.Qb(),s.Qb(),s.Rb(48,"div",23),s.Rb(49,"label"),s.zc(50,"Imagen de documento (posterior)"),s.Qb(),s.Rb(51,"div",24),s.Rb(52,"div",25),s.zc(53,"Subir"),s.Qb(),s.Rb(54,"input",26),s.Zb("change",(function(n){return s.pc(e),s.bc().uploadDocument(n,"naturalperson-dniback")})),s.Qb(),s.Rb(55,"a",27),s.zc(56),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.bc();s.Ab(4),s.gc("ngModel",e.form.naturalperson.fatherslastname),s.Ab(4),s.gc("ngModel",e.form.naturalperson.motherslastname),s.Ab(4),s.gc("ngModel",e.form.naturalperson.name),s.Ab(4),s.gc("ngModel",e.form.naturalperson.dninumber),s.Ab(4),s.gc("ngModel",e.form.naturalperson.dateofbirth),s.Ab(4),s.gc("ngModel",e.form.naturalperson.countryofbirth),s.Ab(4),s.gc("ngModel",e.form.naturalperson.countryofresidence),s.Ab(4),s.gc("ngModel",e.form.naturalperson.phone),s.Ab(4),s.gc("ngModel",e.form.naturalperson.address),s.Ab(10),s.gc("href",e.uploadsText.naturalperson.dnifront.indexOf("https")>-1?e.uploadsText.naturalperson.dnifront:e.form.naturalperson.dnifront?e.form.naturalperson.dnifront:"",s.rc),s.Ab(1),s.Ac(e.uploadsText.naturalperson.dnifront||"Ver Imagen"),s.Ab(8),s.gc("href",e.uploadsText.naturalperson.dniback.indexOf("https")>-1?e.uploadsText.naturalperson.dniback:e.form.naturalperson.dniback?e.form.naturalperson.dniback:"",s.rc),s.Ab(1),s.Ac(e.uploadsText.naturalperson.dniback||"Ver Imagen")}}function Q(e,n){if(1&e){const e=s.Sb();s.Rb(0,"div",28),s.Rb(1,"div",21),s.Rb(2,"h6"),s.zc(3,"Datos de la empresa"),s.Qb(),s.Qb(),s.Rb(4,"div",15),s.Rb(5,"label",16),s.zc(6,"Raz\xf3n social"),s.Qb(),s.Rb(7,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.company.businessname=n})),s.Qb(),s.Qb(),s.Rb(8,"div",15),s.Rb(9,"label",16),s.zc(10,"Ruc"),s.Qb(),s.Rb(11,"input",18),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.company.ruc=n})),s.Qb(),s.Qb(),s.Rb(12,"div",15),s.Rb(13,"label",16),s.zc(14,"Direcci\xf3n Fiscal"),s.Qb(),s.Rb(15,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.company.fiscaladdress=n})),s.Qb(),s.Qb(),s.Rb(16,"div",21),s.Rb(17,"div",29),s.Rb(18,"div",30),s.Rb(19,"label"),s.zc(20,"Ficha Ruc"),s.Qb(),s.Rb(21,"div",24),s.Rb(22,"div",25),s.zc(23,"Subir"),s.Qb(),s.Rb(24,"input",26),s.Zb("change",(function(n){return s.pc(e),s.bc().uploadDocument(n,"legalperson-company-ructab")})),s.Qb(),s.Rb(25,"a",27),s.zc(26),s.Qb(),s.Qb(),s.Qb(),s.Rb(27,"div",30),s.Rb(28,"label"),s.zc(29,"Vigencia de poderes"),s.Qb(),s.Rb(30,"div",24),s.Rb(31,"div",25),s.zc(32,"Subir"),s.Qb(),s.Rb(33,"input",26),s.Zb("change",(function(n){return s.pc(e),s.bc().uploadDocument(n,"legalperson-company-validityofpowers")})),s.Qb(),s.Rb(34,"a",27),s.zc(35),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(36,"div",31),s.Rb(37,"h6"),s.zc(38,"Datos del representante"),s.Qb(),s.Qb(),s.Rb(39,"div",15),s.Rb(40,"label",16),s.zc(41,"Apellido Paterno"),s.Qb(),s.Rb(42,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.fatherslastname=n})),s.Qb(),s.Qb(),s.Rb(43,"div",15),s.Rb(44,"label",16),s.zc(45,"Apellido Materno"),s.Qb(),s.Rb(46,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.motherslastname=n})),s.Qb(),s.Qb(),s.Rb(47,"div",15),s.Rb(48,"label",16),s.zc(49,"Nombres"),s.Qb(),s.Rb(50,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.name=n})),s.Qb(),s.Qb(),s.Rb(51,"div",15),s.Rb(52,"label",16),s.zc(53,"Nro de DNI"),s.Qb(),s.Rb(54,"input",18),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.dninumber=n})),s.Qb(),s.Qb(),s.Rb(55,"div",15),s.Rb(56,"label",16),s.zc(57,"Fecha Nacimiento"),s.Qb(),s.Rb(58,"input",19),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.dateofbirth=n})),s.Qb(),s.Qb(),s.Rb(59,"div",15),s.Rb(60,"label",16),s.zc(61,"Pa\xeds de nacimiento"),s.Qb(),s.Rb(62,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.countryofbirth=n})),s.Qb(),s.Qb(),s.Rb(63,"div",15),s.Rb(64,"label",16),s.zc(65,"Pa\xeds de residencia"),s.Qb(),s.Rb(66,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.countryofresidence=n})),s.Qb(),s.Qb(),s.Rb(67,"div",15),s.Rb(68,"label",16),s.zc(69,"Tel\xe9fono"),s.Qb(),s.Rb(70,"input",18),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.phone=n})),s.Qb(),s.Qb(),s.Rb(71,"div",20),s.Rb(72,"label",16),s.zc(73,"Direcci\xf3n"),s.Qb(),s.Rb(74,"input",17),s.Zb("ngModelChange",(function(n){return s.pc(e),s.bc().form.legalperson.legalrepresentative.adrress=n})),s.Qb(),s.Qb(),s.Rb(75,"div",21),s.Rb(76,"div",29),s.Rb(77,"div",30),s.Rb(78,"label"),s.zc(79,"Imagen de documento (frente)"),s.Qb(),s.Rb(80,"div",24),s.Rb(81,"div",25),s.zc(82,"Subir"),s.Qb(),s.Rb(83,"input",26),s.Zb("change",(function(n){return s.pc(e),s.bc().uploadDocument(n,"legalperson-legalrepresentative-dnifront")})),s.Qb(),s.Rb(84,"a",27),s.zc(85),s.Qb(),s.Qb(),s.Qb(),s.Rb(86,"div",30),s.Rb(87,"label"),s.zc(88,"Imagen de documento (posterior)"),s.Qb(),s.Rb(89,"div",24),s.Rb(90,"div",25),s.zc(91,"Subir"),s.Qb(),s.Rb(92,"input",26),s.Zb("change",(function(n){return s.pc(e),s.bc().uploadDocument(n,"legalperson-legalrepresentative-dniback")})),s.Qb(),s.Rb(93,"a",27),s.zc(94),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.bc();s.Ab(7),s.gc("ngModel",e.form.legalperson.company.businessname),s.Ab(4),s.gc("ngModel",e.form.legalperson.company.ruc),s.Ab(4),s.gc("ngModel",e.form.legalperson.company.fiscaladdress),s.Ab(10),s.gc("href",e.uploadsText.legalperson.company.ructab.indexOf("https")>-1?e.uploadsText.legalperson.company.ructab:e.form.legalperson.company.ructab?e.form.legalperson.company.ructab:"",s.rc),s.Ab(1),s.Ac(e.uploadsText.legalperson.company.ructab||"Ver Imagen"),s.Ab(8),s.gc("href",e.uploadsText.legalperson.company.validityofpowers.indexOf("https")>-1?e.uploadsText.legalperson.company.validityofpowers:e.form.legalperson.company.validityofpowers?e.form.legalperson.company.validityofpowers:"",s.rc),s.Ab(1),s.Ac(e.uploadsText.legalperson.company.validityofpowers||"Ver Imagen"),s.Ab(7),s.gc("ngModel",e.form.legalperson.legalrepresentative.fatherslastname),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.motherslastname),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.name),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.dninumber),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.dateofbirth),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.countryofbirth),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.countryofresidence),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.phone),s.Ab(4),s.gc("ngModel",e.form.legalperson.legalrepresentative.adrress),s.Ab(10),s.gc("href",e.uploadsText.legalperson.legalrepresentative.dnifront.indexOf("https")>-1?e.uploadsText.legalperson.legalrepresentative.dnifront:e.form.legalperson.legalrepresentative.dnifront?e.form.legalperson.legalrepresentative.dnifront:"",s.rc),s.Ab(1),s.Ac(e.uploadsText.legalperson.legalrepresentative.dnifront||"Ver Imagen"),s.Ab(8),s.gc("href",e.uploadsText.legalperson.legalrepresentative.dniback.indexOf("https")>-1?e.uploadsText.legalperson.legalrepresentative.dniback:e.form.legalperson.legalrepresentative.dniback?e.form.legalperson.legalrepresentative.dniback:"",s.rc),s.Ab(1),s.Ac(e.uploadsText.legalperson.legalrepresentative.dniback||"Ver Imagen")}}function y(e,n){1&e&&s.Mb(0,"app-load")}const M=function(e){return{"bg-color1":e}},A=function(e){return{"text-danger":e}},x=[{path:"",component:(()=>{class e{constructor(e,n,t,r,a,o){this.router=e,this.api=n,this.userService=t,this.afAuth=r,this.store=a,this.storage=o,this.isLoad=!1,this.investments=[],this.invalid=!1,this.type="naturalperson",this.response="",this.form={uid:"",naturalperson:{fatherslastname:"",motherslastname:"",name:"",dninumber:"",dateofbirth:"",countryofbirth:"",countryofresidence:"",phone:"",address:"",dnifront:"",dniback:""},legalperson:{company:{businessname:"",ruc:"",fiscaladdress:"",ructab:"",validityofpowers:""},legalrepresentative:{fatherslastname:"",motherslastname:"",name:"",dninumber:"",dateofbirth:"",countryofbirth:"",countryofresidence:"",phone:"",address:"",dnifront:"",dniback:""}}},this.uploadsText={naturalperson:{dnifront:"",dniback:""},legalperson:{company:{ructab:"",validityofpowers:""},legalrepresentative:{dnifront:"",dniback:""}}}}ngOnInit(){this.validateSession()}validateSession(){this.afAuth.user.pipe(Object(o.a)(e=>!!e),Object(l.a)(e=>this.userService.user$(e.uid))).subscribe(e=>{this.user=e,this.api.c("USER",e),this.form.uid=e.uid,this.getProfile()})}setData(e){this.store.dispatch(b.a({data:e}))}toogle(){this.response="",this.type="naturalperson"==this.type?"legalperson":"naturalperson"}saveProfile(){if(this.api.c("FORM",this.form),this.isLoad=!0,this.response="",this.invalid=!1,!1!==this.validation()){const e={};e[this.type]=this.form[this.type],this.api.api({service:"general/profiles",type:this.profile&&this.profile.length>0?"patch":"post",data:{data:{uid:this.user.uid,data:e}}}).subscribe(e=>{this.api.c("Save profile RES",e),this.isLoad=!1,this.response=e.message},e=>{this.api.c("Error Save Profile",e),this.isLoad=!1})}else this.isLoad=!1,this.response="Debe completar todos los campos",this.invalid=!0}getProfile(){this.isLoad=!0,this.response="",this.invalid=!1,this.api.api({service:"general/profiles/uid/"+this.user.uid,type:"get"}).subscribe(e=>{this.api.c("getProfile RES",e),this.profile=e,e.length>0&&e[0].data.data.naturalperson&&(this.form.naturalperson=e[0].data.data.naturalperson),e.length>0&&e[0].data.data.legalperson&&(this.form.legalperson=e[0].data.data.legalperson),this.isLoad=!1},e=>{this.api.c("Error getProfile",e),this.isLoad=!1})}validation(){let e=!0;for(var[n,t]of Object.entries(this.form[this.type]))if("legalperson"==this.type)for(var[r,a]of Object.entries(t))""==a&&(e=!1);else""==t&&(e=!1);return e}uploadDocument(e,n){let t,r=n.split("-")[0],a=n.split("-")[1];n.split("-").length>2&&(t=n.split("-")[2]),this.isLoad=!0;const o=e.target.files[0];this.uploadsText[r][a]=o.name;const l=`profiledocuments/${(new Date).getTime()}_${o.name}`,b=this.storage.ref(l);this.storage.upload(l,o).snapshotChanges().pipe(Object(i.a)(()=>{b.getDownloadURL().subscribe(e=>{e&&(t?this.form[r][a][t]=e:this.form[r][a]=e,this.isLoad=!1)})})).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(s.Lb(a.a),s.Lb(c.a),s.Lb(p.a),s.Lb(d.a),s.Lb(u.a),s.Lb(g.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-profile"]],decls:22,vars:13,consts:[[1,"row","m-0"],[1,"d-none","d-xl-block","menu-container","col-3","bg-color1","p-0","m-0","pt-5"],[1,"container-container","flex-1","bg-color5","p-5"],[1,"row","m-0","justify-content-between","align-items-center"],[1,"row","m-0","justify-content-center","align-items-center","mt-5","col-12","p-0"],[1,"row","col-12"],[1,"btn3",3,"ngClass","click"],[1,"btn3","ml-2",3,"ngClass","click"],["class","col-12 row mt-4",4,"ngIf"],["class","col-12 row justify-content-start align-items-center mt-4",4,"ngIf"],[1,"row","col-12","mt-5","justify-content-end"],[1,"btn1",3,"click"],[1,"col-12","text-right","mt-3","text-color1",3,"ngClass"],[4,"ngIf"],[1,"col-12","row","mt-4"],[1,"col-12","col-xl-4","mt-2"],[1,"col-12","mb-2","p-0"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],[1,"col-12","col-xl-8","mt-2"],[1,"col-12"],[1,"row","col-12","mt-2","p-0","m-0"],[1,"col-12","col-xl-4","mt-4"],[1,"upload","cursor"],[1,"btn2","text-center","cursor"],["type","file","accept","image/*",1,"cursor",3,"change"],["target","_blank",1,"text-color1","mt-3","col-12","text-center",3,"href"],[1,"col-12","row","justify-content-start","align-items-center","mt-4"],[1,"row","col-12","mt-2","p-0"],[1,"col-12","col-xl-4","mt-3"],[1,"col-12","mt-4"]],template:function(e,n){1&e&&(s.Mb(0,"app-header"),s.Rb(1,"div",0),s.Rb(2,"div",1),s.Mb(3,"app-menu"),s.Qb(),s.Rb(4,"div",2),s.Rb(5,"div",3),s.Rb(6,"h5"),s.zc(7,"Datos de Usuario"),s.Qb(),s.Qb(),s.Rb(8,"div",4),s.Rb(9,"div",5),s.Rb(10,"button",6),s.Zb("click",(function(){return n.toogle()})),s.zc(11,"Persona Natural"),s.Qb(),s.Rb(12,"button",7),s.Zb("click",(function(){return n.toogle()})),s.zc(13,"Persona Jur\xedrica"),s.Qb(),s.Qb(),s.xc(14,v,57,13,"div",8),s.xc(15,Q,95,20,"div",9),s.Rb(16,"div",10),s.Rb(17,"button",11),s.Zb("click",(function(){return n.saveProfile()})),s.zc(18,"Guardar"),s.Qb(),s.Rb(19,"p",12),s.zc(20),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.xc(21,y,1,0,"app-load",13)),2&e&&(s.Ab(10),s.gc("ngClass",s.jc(7,M,"naturalperson"===n.type)),s.Ab(2),s.gc("ngClass",s.jc(9,M,"legalperson"===n.type)),s.Ab(2),s.gc("ngIf","naturalperson"==n.type),s.Ab(1),s.gc("ngIf","legalperson"==n.type),s.Ab(4),s.gc("ngClass",s.jc(11,A,n.invalid)),s.Ab(1),s.Ac(n.response),s.Ab(1),s.gc("ngIf",n.isLoad))},directives:[f.a,m.a,r.i,r.k,h.a,h.c,h.d,h.e,R.a],styles:[".search-container[_ngcontent-%COMP%]{position:relative}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:3px solid #0d142e;background-color:transparent;padding-left:20px;padding-top:8px;padding-bottom:8px}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#0d142e}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:42px;min-height:42px;border:none}.image[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;min-height:300px}.bg-color1[_ngcontent-%COMP%]{background-color:#0d142e!important}input[_ngcontent-%COMP%]{border-radius:8px;border:3px solid #0d142e;min-width:100%;min-height:40px;padding-left:20px}"]}),e})()}];let z=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(n){return new(n||e)},imports:[[a.d.forChild(x)],a.d]}),e})();var C=t("ZTpL"),w=t("AiV+"),Z=t("GANc");let k=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(n){return new(n||e)},imports:[[r.c,z,C.a,w.a,Z.a,h.b]]}),e})()}}]);