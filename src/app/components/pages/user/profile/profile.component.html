<app-header></app-header>
<div class="row m-0">
    <div class="d-none d-xl-block menu-container col-3 bg-color1 p-0 m-0 pt-5">
        <app-menu></app-menu>
    </div>

    <div class="container-container flex-1 bg-color5 p-5">

        <div class="row m-0 justify-content-between align-items-center">
            <h5>Datos de Usuario</h5>                            
        </div>
        
        <div class="row m-0 justify-content-center align-items-center mt-5 col-12 p-0">

            <div class="row col-12">
                <button (click)="toogle()" [ngClass]="{'bg-color1': type==='naturalperson'}" class="btn3">Persona Natural</button>
                <button (click)="toogle()" [ngClass]="{'bg-color1': type==='legalperson'}" class="btn3 ml-2">Persona Jurírica</button>
            </div>

            <div class="col-12 row mt-4" *ngIf="type == 'naturalperson'">
               

                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">Apellido Paterno</label>
                        <input type="text" [(ngModel)]="form.naturalperson.fatherslastname">
                    </div>
                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">Apellido Materno</label>
                        <input type="text" [(ngModel)]="form.naturalperson.motherslastname">
                    </div> 
                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">Nombres</label>
                        <input type="text" [(ngModel)]="form.naturalperson.name">
                    </div>
                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">Nro de DNI</label>
                        <input type="number" [(ngModel)]="form.naturalperson.dninumber">
                    </div>
                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">Fecha Nacimiento</label>
                        <input type="date" [(ngModel)]="form.naturalperson.dateofbirth">
                    </div>
                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">País de nacimiento</label>
                        <input type="text" [(ngModel)]="form.naturalperson.countryofbirth">
                    </div>
                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">País de residencia</label>
                        <input type="text" [(ngModel)]="form.naturalperson.countryofresidence">
                    </div>
                    <div class="col-12 col-xl-4 mt-2">
                        <label class="col-12 mb-2 p-0">Teléfono</label>
                        <input type="number" [(ngModel)]="form.naturalperson.phone">
                    </div>
                    <div class="col-12 col-xl-8 mt-2">
                        <label class="col-12 mb-2 p-0">Dirección</label>
                        <input type="text" [(ngModel)]="form.naturalperson.address">
                    </div>  
                    
                    <div class="col-12">

                        <div class="row col-12 mt-2 p-0 m-0">
                            <div class="col-12 col-xl-4 mt-4">
                                <label>Imagen de documento (frente)</label>
                                <div class="upload cursor">
                                    <div class="btn2 text-center cursor">Subir</div>
                                    <input type="file" class="cursor" accept="image/*" (change)="uploadDocument($event, 'naturalperson-dnifront')">
                                    <a target="_blank" [href]="(uploadsText.naturalperson.dnifront.indexOf('https')>-1)? uploadsText.naturalperson.dnifront: (form.naturalperson.dnifront) ? form.naturalperson.dnifront: ''" class="text-color1 mt-3 col-12 text-center">{{uploadsText.naturalperson.dnifront || 'Ver Imagen'}}</a>
                                </div>
                            </div>
                        
                            <div class="col-12 col-xl-4 mt-4">
                                <label>Imagen de documento (posterior)</label>
                                <div class="upload cursor">
                                    <div class="btn2 text-center cursor">Subir</div>
                                    <input type="file" class="cursor" accept="image/*" (change)="uploadDocument($event, 'naturalperson-dniback')">
                                    <a target="_blank" [href]="(uploadsText.naturalperson.dniback.indexOf('https')>-1)? uploadsText.naturalperson.dniback: (form.naturalperson.dniback) ? form.naturalperson.dniback: ''" class="text-color1 mt-3 col-12 text-center">{{uploadsText.naturalperson.dniback || 'Ver Imagen'}}</a>
                                </div>
                            </div>
                        </div>

                    </div>
                
            </div>

            <div class="col-12 row justify-content-start align-items-center mt-4" *ngIf="type == 'legalperson'">

                <div class="col-12">
                    <h6>Datos de la empresa</h6>
                </div>

                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Razón social</label>
                    <input type="text" [(ngModel)]="form.legalperson.company.businessname">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Ruc</label>
                    <input type="number" [(ngModel)]="form.legalperson.company.ruc">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Dirección Fiscal</label>
                    <input type="text" [(ngModel)]="form.legalperson.company.fiscaladdress">
                </div>

                <div class="col-12">
                
                    <div class="row col-12 mt-2 p-0">
                        <div class="col-12 col-xl-4 mt-3">
                            <label>Ficha Ruc</label>
                            <div class="upload cursor">
                                <div class="btn2 text-center cursor">Subir</div>
                                <input type="file" class="cursor" accept="image/*" (change)="uploadDocument($event, 'legalperson-company-ructab')">
                                <a target="_blank" [href]="(uploadsText.legalperson.company.ructab.indexOf('https')>-1)? uploadsText.legalperson.company.ructab: (form.legalperson.company.ructab) ? form.legalperson.company.ructab: ''" class="text-color1 mt-3 col-12 text-center">{{uploadsText.legalperson.company.ructab || 'Ver Imagen'}}</a>
                            </div>
                        </div>
                
                        <div class="col-12 col-xl-4 mt-3">
                            <label>Vigencia de poderes</label>
                            <div class="upload cursor">
                                <div class="btn2 text-center cursor">Subir</div>
                                <input type="file" class="cursor" accept="image/*" (change)="uploadDocument($event, 'legalperson-company-validityofpowers')">
                                <a target="_blank" [href]="(uploadsText.legalperson.company.validityofpowers.indexOf('https')>-1)? uploadsText.legalperson.company.validityofpowers: (form.legalperson.company.validityofpowers) ? form.legalperson.company.validityofpowers: ''" class="text-color1 mt-3 col-12 text-center">{{uploadsText.legalperson.company.validityofpowers || 'Ver Imagen'}}</a>
                            </div>
                        </div>
                    </div>
                
                </div>
                
                <div class="col-12 mt-4">
                    <h6>Datos del representante</h6>
                </div>
            
            
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Apellido Paterno</label>
                    <input type="text" [(ngModel)]="form.legalperson.legalrepresentative.fatherslastname">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Apellido Materno</label>
                    <input type="text" [(ngModel)]="form.legalperson.legalrepresentative.motherslastname">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Nombres</label>
                    <input type="text" [(ngModel)]="form.legalperson.legalrepresentative.name">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Nro de DNI</label>
                    <input type="number" [(ngModel)]="form.legalperson.legalrepresentative.dninumber">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Fecha Nacimiento</label>
                    <input type="date" [(ngModel)]="form.legalperson.legalrepresentative.dateofbirth">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">País de nacimiento</label>
                    <input type="text" [(ngModel)]="form.legalperson.legalrepresentative.countryofbirth">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">País de residencia</label>
                    <input type="text" [(ngModel)]="form.legalperson.legalrepresentative.countryofresidence">
                </div>
                <div class="col-12 col-xl-4 mt-2">
                    <label class="col-12 mb-2 p-0">Teléfono</label>
                    <input type="number" [(ngModel)]="form.legalperson.legalrepresentative.phone">
                </div>
                <div class="col-12 col-xl-8 mt-2">
                    <label class="col-12 mb-2 p-0">Dirección</label>
                    <input type="text" [(ngModel)]="form.legalperson.legalrepresentative.adrress">
                </div>
            
                <div class="col-12">
            
                    <div class="row col-12 mt-2 p-0">
                        <div class="col-12 col-xl-4 mt-3">
                            <label>Imagen de documento (frente)</label>
                            <div class="upload cursor">
                                <div class="btn2 text-center cursor">Subir</div>
                                <input type="file" class="cursor" accept="image/*" (change)="uploadDocument($event, 'legalperson-legalrepresentative-dnifront')">                                
                                <a target="_blank" [href]="(uploadsText.legalperson.legalrepresentative.dnifront.indexOf('https')>-1)? uploadsText.legalperson.legalrepresentative.dnifront: (form.legalperson.legalrepresentative.dnifront) ? form.legalperson.legalrepresentative.dnifront: ''" class="text-color1 mt-3 col-12 text-center">{{uploadsText.legalperson.legalrepresentative.dnifront || 'Ver Imagen'}}</a>
                            </div>
                        </div>
            
                        <div class="col-12 col-xl-4 mt-3">
                            <label>Imagen de documento (posterior)</label>
                            <div class="upload cursor">
                                <div class="btn2 text-center cursor">Subir</div>
                                <input type="file" class="cursor" accept="image/*" (change)="uploadDocument($event, 'legalperson-legalrepresentative-dniback')">                           
                                <a target="_blank" [href]="(uploadsText.legalperson.legalrepresentative.dniback.indexOf('https')>-1)? uploadsText.legalperson.legalrepresentative.dniback: (form.legalperson.legalrepresentative.dniback) ? form.legalperson.legalrepresentative.dniback: ''" class="text-color1 mt-3 col-12 text-center">{{uploadsText.legalperson.legalrepresentative.dniback || 'Ver Imagen'}}</a>
                            </div>
                        </div>
                    </div>
            
                </div>            
            
            </div>


            <div class="row col-12 mt-5 justify-content-end">
                <button (click)="saveProfile()" class="btn1">Guardar</button>
                <p [ngClass]="{'text-danger': invalid}" class="col-12 text-right mt-3 text-color1">{{response}}</p>
            </div>

        </div>
        
    </div>
</div>

<app-load *ngIf="isLoad"></app-load>